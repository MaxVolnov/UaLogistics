databaseChangeLog:
  - changeSet:
      id: 1
      author: Maksim
      changes:
        - sql:
            sql: CREATE TABLE IF NOT EXISTS public.deliverymen (
              id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
              email VARCHAR(255) NOT NULL,
              name VARCHAR(255) NOT NULL,
              phone_number VARCHAR(255) NOT NULL,
              CONSTRAINT deliverymen_pkey PRIMARY KEY (id)
              )

        - sql:
            sql: CREATE TABLE IF NOT EXISTS public.donators (
              id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
              address VARCHAR(255) NOT NULL,
              city VARCHAR(255) NOT NULL,
              country VARCHAR(255) NOT NULL,
              email VARCHAR(255) NOT NULL,
              name VARCHAR(255) NOT NULL,
              phone_number VARCHAR(255) NOT NULL,
              postal_code VARCHAR(255) NOT NULL,
              CONSTRAINT donators_pkey PRIMARY KEY (id)
              )

        - sql:
            sql: CREATE TABLE IF NOT EXISTS public.requestor (
              id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
              address VARCHAR(255),
              email VARCHAR(255),
              name VARCHAR(255),
              phone VARCHAR(255),
              CONSTRAINT requestor_pkey PRIMARY KEY (id)
              )

        - sql:
            sql: CREATE TABLE IF NOT EXISTS public.products (
              id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
              name VARCHAR(255) NOT NULL,
              description TEXT NOT NULL,
              price NUMERIC(10,2) NOT NULL,
              category VARCHAR(255),
              product_category VARCHAR(255),
              CONSTRAINT products_pkey PRIMARY KEY (id)
              )

        - sql:
            sql: CREATE TABLE IF NOT EXISTS public.orders (
              id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
              requestor_id BIGINT NOT NULL,
              status VARCHAR(255) NOT NULL,
              donator_id BIGINT,
              donation_type VARCHAR(255) NOT NULL,
              requested_quantity INTEGER NOT NULL,
              CONSTRAINT orders_pkey PRIMARY KEY (id),
              CONSTRAINT orders_donator_id_fkey FOREIGN KEY (donator_id) REFERENCES public.donators (id) ON DELETE SET NULL,
              CONSTRAINT orders_requestor_id_fkey FOREIGN KEY (requestor_id) REFERENCES public.requestor (id) ON DELETE CASCADE
              )

        - sql:
            sql: CREATE TABLE IF NOT EXISTS public.order_item (
              id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
              order_id BIGINT NOT NULL,
              product_id BIGINT NOT NULL,
              quantity INTEGER NOT NULL,
              CONSTRAINT order_item_pkey PRIMARY KEY (id),
              CONSTRAINT order_item_order_id_fkey FOREIGN KEY (order_id) REFERENCES public.orders (id) ON DELETE CASCADE,
              CONSTRAINT order_item_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.products (id) ON DELETE CASCADE
              )

  - changeSet:
      id: 2
      author: Maksim
      changes:
        - sql:
            sql: SELECT setval('deliverymen_id_seq', (SELECT MAX(id) FROM deliverymen))
        - sql:
            sql: SELECT setval('donators_id_seq', (SELECT MAX(id) FROM donators))
        - sql:
            sql: SELECT setval('requestor_id_seq', (SELECT MAX(id) FROM requestor))
        - sql:
            sql: SELECT setval('products_id_seq', (SELECT MAX(id) FROM products))
        - sql:
            sql: SELECT setval('orders_id_seq', (SELECT MAX(id) FROM orders))
        - sql:
            sql: SELECT setval('order_item_id_seq', (SELECT MAX(id) FROM order_item))